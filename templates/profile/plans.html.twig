{% extends 'layouts/base.html.twig' %}

{% block title %} - {{ "title.profile.plans"|trans }}{% endblock %}

{% block one_row_content %}
    <link rel="stylesheet" href="{{ asset('chartjs/Chart.css') }}">
    <script src="{{ asset('chartjs/Chart.js') }}"></script>
    <div class="content">
        <div class="settings">
            <h1>
                {% if app.user.isPremium %}
                    <img src="{{ asset('img/reward.png') }}" width="40" align="center" alt="Premium member reward" title="Premium member">
                {% endif %}
                {{ app.user.email }}
            </h1>
            <hr>
            <div class="text-center">
                <h1>{{ "Select your subscription"|trans }}</h1>
            </div>
            <div class="premium-plans-wrapper">
                <div class="premium-plans">
                    <div class="plan">
                        <div class="title">
                            <h3>{{ "Free"|trans }}</h3>
                        </div>
                        <div class="conditions">
                            <ul>
                                <li>{{ "Access to typing test"|trans }}</li>
                                <li>{{ "Access to basic courses"|trans }}</li>
                            </ul>
                        </div>
                        <div class="price-footer">
                            <div class="price">
                                $0 <span class="small">/{{ "month"|trans }}</span>
                            </div>
                            <div class="select {% if not app.user.isPremium %} current {% endif %}">
                                {% if not app.user.isPremium %}
                                    <button class="btn selected" disabled title="Your current premium plan">
                                        {{ "selected.subscription"|trans }} <i class="fal fa-check"></i>
                                    </button>
                                {% else %}
                                    <div class="select">
                                        <button class="btn">{{ "select.subscription"|trans }}</button>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="plan">
                        <div class="title">
                            <h3>{{ "Premium"|trans }}</h3>
                        </div>
                        <div class="conditions">
                            <ul>
                                <li>{{ "Access to typing test"|trans }}</li>
                                <li>{{ "Access to basic courses"|trans }}</li>
                                <li>{{ "Access to advanced courses"|trans }}</li>
                                <li>{{ "Access to premium features"|trans }}</li>
                                <li>{{ "No advertisements"|trans }}</li>
                            </ul>
                        </div>
                        <div class="price-footer">
                            <div class="price">
                                $3<span class="small-price">.99</span> <span class="small">/{{ "month"|trans }}</span>
                            </div>
                            <div class="select {% if app.user.isPremium %} current {% endif %}">
                                {% if app.user.isPremium %}
                                    <button class="btn selected" disabled title="Your current premium plan">
                                        {{ "selected.subscription"|trans }} <i class="fal fa-check"></i>
                                    </button>
                                    <br>
                                    <a href="#" class="link cancel-subscription">{{ "cancel subscription"|trans }}</a>
                                {% else %}
                                    <div class="select">
                                        <a class="btn" href="{{ path('liqpay_subscription') }}">{{ "select.subscription"|trans }}</a>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block two_rows %}{% endblock %}

{%block scripts %}
    <script>
        $(document).ready(function () {
            $(".cancel-subscription").click(function () {
                let result = confirm("Are you sure you want to cancel your premium subscription?");
                if (result) {
                    window.location.href = "{{ path('liqpay_unsubscribe') }}";
                }
            });
        });
    </script>
{% endblock %}
